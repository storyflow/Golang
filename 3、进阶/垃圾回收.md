

## 主流回收算法

一、引用计数法

1、引用计数，给每一个对象增加一个计数器，每当该对象被引用/解除的时候，计数器自增/自减1，当该计数器归零的时候，则对象被回收。

二、追踪式垃圾回收算法





## golang: 三色垃圾回收

1、创建对象都是白色,

2、从根节点开发遍历，标记为灰色对象

3、扫码灰色集合。引用别人的话 ，被引用的插槽变成灰色，自己变成黑色。

没有依赖别人，自己也会变成黑色。

4、GC循环遍历灰色集合，直到灰色集合之中没有节点。

5、gc回收白色对象

6、最后将所有的黑色对象变成白色。









## 在三色回收算法中，会区分堆上的对象和栈上的对象

1. 从静态存储区域分配：它是由编译器自动分配和释放的，即内存在程序编译的时候就已经分配好，这块内存在程序的整个运行期间都存在，直到整个程序运行结束时才被释放，如全局变量与const变量。
2. 在栈上分配：它同样也是由编译器自动分配和释放的，即在执行函数时，函数内局部变量的存储单元都可以在栈上创建，函数执行结束时这些存储单元将被自动释放。需要注意的是，栈内存分配运算内置于处理器的指令集中，它的运行效率一般很高，但是分配的内存容量有限。比如：i := 0 或 s := “abcdef”.
3. 从堆上分配：也被称为动态内存分配，它是由程序员手动完成申请和释放的。即程序在运行的时候由程序员使用内存分配函数来申请任意多少的内存。比如：arr := make([]int, 10).